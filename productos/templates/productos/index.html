{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bunker Top - Recomendaciones de Productos</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Fonts - Poppins -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/poppins-font/1.0.1/poppins-font.min.css" rel="stylesheet">
  <style>
      body {
          font-family: 'Poppins', sans-serif;
      }

      .navbar {
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
          padding: 20px 0;
          background-color: #ffffff;
      }

      .navbar-brand {
          font-weight: 800;
          font-size: 1.8rem;
          color: #5580b7;
          position: relative;
      }

      .navbar-brand span {
          color: #010101;
      }

      .navbar-nav {
          margin-left: auto;
          align-items: center;
      }

      .nav-link {
          font-weight: 500;
          font-size: 14px;
          color: #212529;
          text-transform: uppercase;
          letter-spacing: 1px;
          padding: 10px 15px !important;
          transition: all 0.3s ease;
      }

      .nav-link:hover,
      .nav-link.active {
          color: #5580b7;
      }

      .dropdown-menu {
          border: none;
          border-radius: 0;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
          padding: 10px 0;
      }

      .dropdown-item {
          font-size: 14px;
          font-weight: 400;
          padding: 8px 25px;
          color: #212529;
          transition: all 0.3s ease;
      }

      .dropdown-item:hover,
      .dropdown-item:focus {
          background-color: #f8f9fa;
          color: #5580b7;
      }

      .social-icons {
          display: flex;
          align-items: center;
          margin-left: 15px;
      }

      .social-icon {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          width: 36px;
          height: 36px;
          border-radius: 50%;
          margin-left: 8px;
          color: white;
          transition: all 0.3s ease;
          text-decoration: none;
      }

      .instagram {
          background: linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d);
      }

      .twitch {
          background-color: #6441a5;
      }

      .whatsapp {
          background-color: #25d366;
      }

      .social-icon:hover {
          transform: scale(1.1);
          opacity: 0.9;
      }

      .social-icon svg {
          width: 18px;
          height: 18px;
          fill: white;
      }

      .navbar-toggler {
          border: none;
          padding: 0;
          font-size: 1.5rem;
          color: #212529;
      }

      .navbar-toggler:focus {
          box-shadow: none;
      }

      @media (max-width: 991px) {
          .navbar-collapse {
              background-color: white;
              padding: 20px;
              margin-top: 15px;
          }

          .social-icons {
              margin-top: 15px;
              margin-left: 0;
              justify-content: center;
          }

          .navbar-nav .nav-item {
              text-align: center;
          }
      }

      /* Estilos originales de products cards */
      .product-card {
          transition: transform 0.3s, box-shadow 0.3s;
          margin-bottom: 20px;
      }
      .product-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      }
      .section-container {
          display: none;
      }
      .section-container.active {
          display: block;
      }
      .card-img-top {
          width: 100%;
          height: 200px;
          object-fit: contain;
      }
      .sub-section-title {
          margin-top: 30px;
          margin-bottom: 15px;
          border-bottom: 2px solid #ccc;
          padding-bottom: 5px;
          font-size: 1.25rem;
          text-transform: uppercase;
      }
  </style>
</head>
<body>
  <!-- Navbar con el nuevo estilo -->
  <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container">
           <a class="navbar-brand" href="#">
              <img src="{% static 'images/logo2.png' %}" alt="Bunker Top" style="height:50px;">
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                  aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav">
                  <li class="nav-item">
                      <a class="nav-link active" href="#" data-section="destacados">Destacados</a>
                  </li>
                  <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="perifericosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                          Periféricos
                      </a>
                      <ul class="dropdown-menu" aria-labelledby="perifericosDropdown">
                          <li><a class="dropdown-item" href="#" data-section="perifericos" data-sub="ratones">Ratones</a></li>
                          <li><a class="dropdown-item" href="#" data-section="perifericos" data-sub="mandos">Mandos</a></li>
                          <li><a class="dropdown-item" href="#" data-section="perifericos" data-sub="teclados">Teclados</a></li>
                          <li><a class="dropdown-item" href="#" data-section="perifericos" data-sub="cascos">Cascos</a></li>
                          <li><a class="dropdown-item" href="#" data-section="perifericos">Ver todos</a></li>
                      </ul>
                  </li>
                  <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="videojuegosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                          Videojuegos
                      </a>
                      <ul class="dropdown-menu" aria-labelledby="videojuegosDropdown">
                          <li><a class="dropdown-item" href="#" data-section="videojuegos" data-sub="fisicos">Físicos</a></li>
                          <li><a class="dropdown-item" href="#" data-section="videojuegos" data-sub="digitales">Digitales</a></li>
                          <li><a class="dropdown-item" href="#" data-section="videojuegos">Ver todos</a></li>
                      </ul>
                  </li>
                  <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="hardwareDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                          Hardware y Consolas
                      </a>
                      <ul class="dropdown-menu" aria-labelledby="hardwareDropdown">
                          <li><a class="dropdown-item" href="#" data-section="hardware" data-sub="consolas">Consolas</a></li>
                          <li><a class="dropdown-item" href="#" data-section="hardware" data-sub="pc">PC</a></li>
                          <li><a class="dropdown-item" href="#" data-section="hardware" data-sub="componentes">Componentes</a></li>
                          <li><a class="dropdown-item" href="#" data-section="hardware">Ver todos</a></li>
                      </ul>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="#" data-section="otros">Otros</a>
                  </li>
                      <div class="social-icons">
              <!-- Instagram SVG -->
              <a href="https://www.instagram.com/elbunkersa" class="social-icon instagram" aria-label="Instagram" target="_blank">
                  <svg viewBox="0 0 448 512">
                      <path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path>
                  </svg>
              </a>

              <!-- Twitch SVG -->
              <a href="https://www.twitch.tv/elbunkersa" class="social-icon twitch" aria-label="Twitch" target="_blank">
                  <svg viewBox="0 0 512 512">
                      <path d="M391.17,103.47H352.54v109.7h38.63ZM285,103H246.37V212.75H285ZM120.83,0,24.31,91.42V420.58H140.14V512l96.53-91.42h77.25L487.69,256V0ZM449.07,237.75l-77.22,73.12H294.61l-67.6,64v-64H140.14V36.58H449.07Z"></path>
                  </svg>
              </a>

              <!-- WhatsApp SVG -->
              <a href="https://www.whatsapp.com" class="social-icon whatsapp" aria-label="WhatsApp" target="_blank">
                  <svg viewBox="0 0 448 512">
                      <path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"></path>
                  </svg>
              </a>
          </div>
              </ul>
          </div>
      </div>
  </nav>

  <!-- Contenedor principal - Conservado del original -->
  <div class="container mt-5">
      <!-- Destacados -->
      <div id="destacados" class="section-container active">
          <h2 class="mb-4">Destacados</h2>
          <div class="row">
              {% for producto in destacados %}
              <div class="col-md-4">
                  <div class="card product-card">
                      <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                      <div class="card-body">
                          <h5 class="card-title">{{ producto.nombre }}</h5>
                          <p class="card-text">{{ producto.descripcion }}</p>
                          <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                      </div>
                  </div>
              </div>
              {% empty %}
              <p>No hay productos destacados.</p>
              {% endfor %}
          </div>
      </div>

      <!-- Periféricos: se muestran sus 4 subcategorías -->
      <div id="perifericos" class="section-container">
          <h2 class="mb-4">Periféricos</h2>
          <!-- Ratones -->
          <div id="ratones" class="sub-section">
              <h3 class="sub-section-title">Ratones</h3>
              <div class="row">
                  {% for producto in ratones %}
                  <div class="col-md-4">
                      <div class="card product-card">
                          <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                          <div class="card-body">
                              <h5 class="card-title">{{ producto.nombre }}</h5>
                              <p class="card-text">{{ producto.descripcion }}</p>
                              <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                          </div>
                      </div>
                  </div>
                  {% empty %}
                  <p>No hay ratones.</p>
                  {% endfor %}
              </div>
          </div>
          <!-- Mandos -->
          <div id="mandos" class="sub-section">
              <h3 class="sub-section-title">Mandos</h3>
              <div class="row">
                  {% for producto in mandos %}
                  <div class="col-md-4">
                      <div class="card product-card">
                          <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                          <div class="card-body">
                              <h5 class="card-title">{{ producto.nombre }}</h5>
                              <p class="card-text">{{ producto.descripcion }}</p>
                              <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                          </div>
                      </div>
                  </div>
                  {% empty %}
                  <p>No hay mandos.</p>
                  {% endfor %}
              </div>
          </div>
          <!-- Teclados -->
          <div id="teclados" class="sub-section">
              <h3 class="sub-section-title">Teclados</h3>
              <div class="row">
                  {% for producto in teclados %}
                  <div class="col-md-4">
                      <div class="card product-card">
                          <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                          <div class="card-body">
                              <h5 class="card-title">{{ producto.nombre }}</h5>
                              <p class="card-text">{{ producto.descripcion }}</p>
                              <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                          </div>
                      </div>
                  </div>
                  {% empty %}
                  <p>No hay teclados.</p>
                  {% endfor %}
              </div>
          </div>
          <!-- Cascos -->
          <div id="cascos" class="sub-section">
              <h3 class="sub-section-title">Cascos</h3>
              <div class="row">
                  {% for producto in cascos %}
                  <div class="col-md-4">
                      <div class="card product-card">
                          <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                          <div class="card-body">
                              <h5 class="card-title">{{ producto.nombre }}</h5>
                              <p class="card-text">{{ producto.descripcion }}</p>
                              <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                          </div>
                      </div>
                  </div>
                  {% empty %}
                  <p>No hay cascos.</p>
                  {% endfor %}
              </div>
          </div>
      </div>

      <!-- Videojuegos: se muestran sus dos subcategorías -->
      <div id="videojuegos" class="section-container">
          <h2 class="mb-4">Videojuegos</h2>
          <!-- Físicos -->
          <div id="fisicos" class="sub-section">
              <h3 class="sub-section-title">Videojuegos Físicos</h3>
              <div class="row">
                  {% for producto in videojuegos_fisicos %}
                  <div class="col-md-4">
                      <div class="card product-card">
                          <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                          <div class="card-body">
                              <h5 class="card-title">{{ producto.nombre }}</h5>
                              <p class="card-text">{{ producto.descripcion }}</p>
                              <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                          </div>
                      </div>
                  </div>
                  {% empty %}
                  <p>No hay videojuegos físicos.</p>
                  {% endfor %}
              </div>
          </div>
          <!-- Digitales -->
          <div id="digitales" class="sub-section">
              <h3 class="sub-section-title">Videojuegos Digitales</h3>
              <div class="row">
                  {% for producto in videojuegos_digitales %}
                  <div class="col-md-4">
                      <div class="card product-card">
                          <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                          <div class="card-body">
                              <h5 class="card-title">{{ producto.nombre }}</h5>
                              <p class="card-text">{{ producto.descripcion }}</p>
                              <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                          </div>
                      </div>
                  </div>
                  {% empty %}
                  <p>No hay videojuegos digitales.</p>
                  {% endfor %}
              </div>
          </div>
      </div>

      <!-- Hardware y Consolas: se muestran sus tres subcategorías -->
      <div id="hardware" class="section-container">
          <h2 class="mb-4">Hardware y Consolas</h2>
          <!-- Consolas -->
          <div id="consolas" class="sub-section">
              <h3 class="sub-section-title">Consolas</h3>
              <div class="row">
                  {% for producto in consolas %}
                  <div class="col-md-4">
                      <div class="card product-card">
                          <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                          <div class="card-body">
                              <h5 class="card-title">{{ producto.nombre }}</h5>
                              <p class="card-text">{{ producto.descripcion }}</p>
                              <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                          </div>
                      </div>
                  </div>
                  {% empty %}
                  <p>No hay consolas.</p>
                  {% endfor %}
              </div>
          </div>
          <!-- PC -->
          <div id="pc" class="sub-section">
              <h3 class="sub-section-title">PC</h3>
              <div class="row">
                  {% for producto in pc %}
                  <div class="col-md-4">
                      <div class="card product-card">
                          <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                          <div class="card-body">
                              <h5 class="card-title">{{ producto.nombre }}</h5>
                              <p class="card-text">{{ producto.descripcion }}</p>
                              <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                          </div>
                      </div>
                  </div>
                  {% empty %}
                  <p>No hay PC.</p>
                  {% endfor %}
              </div>
          </div>
          <!-- Componentes -->
          <div id="componentes" class="sub-section">
              <h3 class="sub-section-title">Componentes</h3>
              <div class="row">
                  {% for producto in componentes %}
                  <div class="col-md-4">
                      <div class="card product-card">
                          <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                          <div class="card-body">
                              <h5 class="card-title">{{ producto.nombre }}</h5>
                              <p class="card-text">{{ producto.descripcion }}</p>
                              <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                          </div>
                      </div>
                  </div>
                  {% empty %}
                  <p>No hay componentes.</p>
                  {% endfor %}
              </div>
          </div>
      </div>

      <!-- Otros -->
      <div id="otros" class="section-container">
          <h2 class="mb-4">Otros</h2>
          <div class="row">
              {% for producto in otros %}
              <div class="col-md-4">
                  <div class="card product-card">
                      <img src="{{ producto.imagen_url }}" class="card-img-top" alt="{{ producto.nombre }}">
                      <div class="card-body">
                          <h5 class="card-title">{{ producto.nombre }}</h5>
                          <p class="card-text">{{ producto.descripcion }}</p>
                          <a href="{{ producto.afiliado_url }}" class="btn btn-outline-dark">Ver producto</a>
                      </div>
                  </div>
              </div>
              {% empty %}
              <p>No hay productos en esta categoría.</p>
              {% endfor %}
          </div>
      </div>
  </div>

  <!-- Bootstrap JS y JavaScript personalizado -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Manejo para menú principal y elementos dropdown
          const navLinks = document.querySelectorAll('.nav-link[data-section]');
          navLinks.forEach(link => {
              link.addEventListener('click', function(e) {
                  e.preventDefault();

                  // Actualizar enlaces activos
                  document.querySelectorAll('.nav-link').forEach(item => item.classList.remove('active'));
                  this.classList.add('active');

                  // Mostrar sección correspondiente
                  const sectionId = this.getAttribute('data-section');
                  document.querySelectorAll('.section-container').forEach(section => section.classList.remove('active'));
                  document.getElementById(sectionId).classList.add('active');
              });
          });

          // Manejo para elementos dropdown
          const dropdownItems = document.querySelectorAll('.dropdown-item');
          dropdownItems.forEach(item => {
              item.addEventListener('click', function(e) {
                  e.preventDefault();

                  // Actualizar enlaces activos
                  const parentDropdown = this.closest('.dropdown');
                  document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                  parentDropdown.querySelector('.nav-link').classList.add('active');

                  // Mostrar sección principal
                  const sectionId = this.getAttribute('data-section');
                  document.querySelectorAll('.section-container').forEach(section => section.classList.remove('active'));
                  document.getElementById(sectionId).classList.add('active');

                  // Si hay subsección, scroll hasta ella
                  const subSection = this.getAttribute('data-sub');
                  if (subSection) {
                      setTimeout(() => {
                          const subElement = document.getElementById(subSection);
                          if (subElement) {
                              subElement.scrollIntoView({behavior: 'smooth'});
                          }
                      }, 100);
                  }
              });
          });
      });
  </script>
</body>
</html>